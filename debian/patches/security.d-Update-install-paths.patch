Subject: security.d: Update install paths
Forwarded: https://github.com/swaywm/sway/pull/1881
Applied-Upstream: no
From: Nicolas Braud-Santoni <nicolas@braud-santoni.eu>
Reviewed-by: Nicolas Braud-Santoni <nicolas@braud-santoni.eu>
Last-Update: 2018-05-05

---
 meson.build               | 1 +
 security.d/00-defaults.in | 6 +++---
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/meson.build b/meson.build
index 79d4e3b..0f23b0e 100644
--- a/meson.build
+++ b/meson.build
@@ -121,6 +121,7 @@ config = configuration_data()
 config.set('sysconfdir', join_paths(prefix, sysconfdir))
 config.set('datadir', join_paths(prefix, datadir))
 config.set('prefix', prefix)
+config.set('sway_libexecdir', sway_libexecdir)
 
 configure_file(
 	configuration: config,
diff --git a/security.d/00-defaults.in b/security.d/00-defaults.in
index e462647..b5ae114 100644
--- a/security.d/00-defaults.in
+++ b/security.d/00-defaults.in
@@ -11,9 +11,9 @@
 # Configures enabled compositor features for specific programs
 permit * fullscreen keyboard mouse
 permit @prefix@/bin/swaylock lock
-permit @prefix@/bin/swaybg background
 permit @prefix@/bin/swaygrab screenshot
-permit @prefix@/bin/swaybar panel
+permit @sway_libexecdir@/swaybg  background
+permit @sway_libexecdir@/swaybar panel
 
 # Configures enabled IPC features for specific programs
 ipc @prefix@/bin/swaymsg {
@@ -24,7 +24,7 @@ ipc @prefix@/bin/swaymsg {
     }
 }
 
-ipc @prefix@/bin/swaybar {
+ipc @sway_libexecdir@/swaybar {
     bar-config enabled
     outputs enabled
     workspaces enabled
